webpackJsonp([1],[,,,,,,function(t,e){},,,,,function(t,e,n){"use strict";function s(t,e,n){var s=new Date;s.setDate(s.getDate()+n),document.cookie=t+"="+e+";expires="+s}function r(t){for(var e=document.cookie.split("; "),n=0;n<e.length;n++){var s=e[n].split("=");if(s[0]===t)return s[1]}return!1}function o(t){s(t,"",-1)}e.c=s,e.a=r,e.b=o},,,,,,function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(s){if(n[s])return n[s].exports;var r=n[s]={exports:{},id:s,loaded:!1};return t[s].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function s(t,e){"object"===(void 0===t?"undefined":r(t))&&(e=t,t=void 0),e=e||{};var n,s=o(t),i=s.source,l=s.id,h=s.path,p=u[l]&&h in u[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||p?(c("ignoring socket cache for %s",i),n=a(i,e)):(u[l]||(c("new io instance for %s",i),u[l]=a(i,e)),n=u[l]),s.query&&!e.query&&(e.query=s.query),n.socket(s.path,e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),i=n(7),a=n(13),c=n(3)("socket.io-client");t.exports=e=s;var u=e.managers={};e.protocol=i.protocol,e.connect=s,e.Manager=n(13),e.Socket=n(39)},function(t,e,n){(function(e){"use strict";function s(t,n){var s=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),o("parse %s",t),s=r(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";var i=-1!==s.host.indexOf(":"),a=i?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port,s.href=s.protocol+"://"+a+(n&&n.port===s.port?"":":"+s.port),s}var r=n(2),o=n(3)("socket.io-client:url");t.exports=s}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),o=t.indexOf("]");-1!=r&&-1!=o&&(t=t.substring(0,r)+t.substring(r,o).replace(/:/g,";")+t.substring(o,t.length));for(var i=n.exec(t||""),a={},c=14;c--;)a[s[c]]=i[c]||"";return-1!=r&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(s){function r(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var s="color: "+this.color;t.splice(1,0,s,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,s)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function c(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==s&&"env"in s&&(t=s.env.DEBUG),t}e=t.exports=n(5),e.log=i,e.formatArgs=o,e.save=a,e.load=c,e.useColors=r,e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(c())}).call(e,n(4))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===s||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function i(){m&&f&&(m=!1,f.length?d=f.concat(d):y=-1,d.length&&a())}function a(){if(!m){var t=r(i);m=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,m=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var l,h,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:s}catch(t){h=s}}();var f,d=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||m||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){function s(t){var n,s=0;for(n in t)s=(s<<5)-s+t.charCodeAt(n),s|=0;return e.colors[Math.abs(s)%e.colors.length]}function r(t){function n(){if(n.enabled){var t=n,s=+new Date,r=s-(u||s);t.diff=r,t.prev=u,t.curr=s,u=s;for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,s){if("%%"===n)return n;a++;var r=e.formatters[s];if("function"==typeof r){var i=o[a];n=r.call(t,i),o.splice(a,1),a--}return n}),e.formatArgs.call(t,o);(n.log||e.log||console.log.bind(console)).apply(t,o)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=s(t),"function"==typeof e.init&&e.init(n),n}function o(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),s=n.length,r=0;r<s;r++)n[r]&&(t=n[r].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function i(){e.enable("")}function a(t){var n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=r.debug=r.default=r,e.coerce=c,e.disable=i,e.enable=o,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var u},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function s(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function r(t){return o(t,u,"day")||o(t,c,"hour")||o(t,a,"minute")||o(t,i,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var i=1e3,a=60*i,c=60*a,u=24*c,l=365.25*u;t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return n(t);if("number"===o&&!1===isNaN(t))return e.long?r(t):s(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function s(){}function r(t){var n=""+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data)),h("encoded %j as %s",t,n),n}function o(t,e){function n(t){var n=d.deconstructPacket(t),s=r(n.packet),o=n.buffers;o.unshift(s),e(o)}d.removeBlobs(t,n)}function i(){this.reconstructor=null}function a(t){var n=0,s={type:Number(t.charAt(0))};if(null==e.types[s.type])return l();if(e.BINARY_EVENT===s.type||e.BINARY_ACK===s.type){for(var r="";"-"!==t.charAt(++n)&&(r+=t.charAt(n),n!=t.length););if(r!=Number(r)||"-"!==t.charAt(n))throw new Error("Illegal attachments");s.attachments=Number(r)}if("/"===t.charAt(n+1))for(s.nsp="";++n;){var o=t.charAt(n);if(","===o)break;if(s.nsp+=o,n===t.length)break}else s.nsp="/";var i=t.charAt(n+1);if(""!==i&&Number(i)==i){for(s.id="";++n;){var o=t.charAt(n);if(null==o||Number(o)!=o){--n;break}if(s.id+=t.charAt(n),n===t.length)break}s.id=Number(s.id)}return t.charAt(++n)&&(s=c(s,t.substr(n))),h("decoded %s as %j",t,s),s}function c(t,e){try{t.data=JSON.parse(e)}catch(t){return l()}return t}function u(t){this.reconPack=t,this.buffers=[]}function l(){return{type:e.ERROR,data:"parser error"}}var h=n(3)("socket.io-parser"),p=n(8),f=n(9),d=n(11),m=n(12);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=s,e.Decoder=i,s.prototype.encode=function(t,n){if(t.type!==e.EVENT&&t.type!==e.ACK||!f(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),h("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)o(t,n);else{n([r(t)])}},p(i.prototype),i.prototype.add=function(t){var n;if("string"==typeof t)n=a(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new u(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!m(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function s(t){if(t)return r(t)}function r(t){for(var e in s.prototype)t[e]=s.prototype[e];return t}t.exports=s,s.prototype.on=s.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},s.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s,r=0;r<n.length;r++)if((s=n[r])===e||s.fn===e){n.splice(r,1);break}return this},s.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var s=0,r=n.length;s<r;++s)n[s].apply(this,e)}return this},s.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},s.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){function s(t){if(!t||"object"!=typeof t)return!1;if(r(t)){for(var n=0,o=t.length;n<o;n++)if(s(t[n]))return!0;return!1}if("function"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||"function"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||i&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return s(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&s(t[c]))return!0;return!1}var r=n(10),o=Object.prototype.toString,i="function"==typeof e.Blob||"[object BlobConstructor]"===o.call(e.Blob),a="function"==typeof e.File||"[object FileConstructor]"===o.call(e.File);t.exports=s}).call(e,function(){return this}())},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function s(t,e){if(!t)return t;if(i(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(o(t)){for(var r=new Array(t.length),a=0;a<t.length;a++)r[a]=s(t[a],e);return r}if("object"==typeof t&&!(t instanceof Date)){var r={};for(var c in t)r[c]=s(t[c],e);return r}return t}function r(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(o(t))for(var n=0;n<t.length;n++)t[n]=r(t[n],e);else if("object"==typeof t)for(var s in t)t[s]=r(t[s],e);return t}var o=n(10),i=n(12),a=Object.prototype.toString,c="function"==typeof t.Blob||"[object BlobConstructor]"===a.call(t.Blob),u="function"==typeof t.File||"[object FileConstructor]"===a.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,r=t;return r.data=s(n,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=r(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function n(t,a,l){if(!t)return t;if(c&&t instanceof Blob||u&&t instanceof File){s++;var h=new FileReader;h.onload=function(){l?l[a]=this.result:r=this.result,--s||e(r)},h.readAsArrayBuffer(t)}else if(o(t))for(var p=0;p<t.length;p++)n(t[p],p,t);else if("object"==typeof t&&!i(t))for(var f in t)n(t[f],f,t)}var s=0,r=t;n(r),s||e(r)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){"use strict";function s(t,e){if(!(this instanceof s))return new s(t,e);t&&"object"===(void 0===t?"undefined":r(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(14),i=n(39),a=n(8),c=n(7),u=n(41),l=n(42),h=n(3)("socket.io-client:manager"),p=n(37),f=n(43),d=Object.prototype.hasOwnProperty;t.exports=s,s.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},s.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},s.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(s.prototype),s.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},s.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},s.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},s.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},s.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},s.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},s.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},s.prototype.open=s.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=o(this.uri,this.opts);var n=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var r=u(n,"open",function(){s.onopen(),t&&t()}),i=u(n,"error",function(e){if(h("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else s.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),r.destroy(),n.close(),n.emit("error","timeout"),s.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(r),this.subs.push(i),this},s.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",l(this,"ondata"))),this.subs.push(u(t,"ping",l(this,"onping"))),this.subs.push(u(t,"pong",l(this,"onpong"))),this.subs.push(u(t,"error",l(this,"onerror"))),this.subs.push(u(t,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},s.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},s.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},s.prototype.ondata=function(t){this.decoder.add(t)},s.prototype.ondecoded=function(t){this.emit("packet",t)},s.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},s.prototype.socket=function(t,e){function n(){~p(r.connecting,s)||r.connecting.push(s)}var s=this.nsps[t];if(!s){s=new i(this,t,e),this.nsps[t]=s;var r=this;s.on("connecting",n),s.on("connect",function(){s.id=r.generateId(t)}),this.autoConnect&&n()}return s},s.prototype.destroy=function(t){var e=p(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},s.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var s=0;s<n.length;s++)e.engine.write(n[s],t.options);e.encoding=!1,e.processPacketQueue()}))},s.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},s.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},s.prototype.close=s.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},s.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},s.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},s.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(15)},function(t,e,n){t.exports=n(16),t.exports.parser=n(23)},function(t,e,n){(function(e){function s(t,n){if(!(this instanceof s))return new s(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=l(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=l(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var r="object"==typeof e&&e;r.global===r&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function r(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=n(17),i=n(8),a=n(3)("engine.io-client:socket"),c=n(37),u=n(23),l=n(2),h=n(38),p=n(31);t.exports=s,s.priorWebsocketSuccess=!1,i(s.prototype),s.protocol=u.protocol,s.Socket=s,s.Transport=n(22),s.transports=n(17),s.parser=n(23),s.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=r(this.query);e.EIO=u.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new o[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},s.prototype.open=function(){var t;if(this.rememberUpgrade&&s.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},s.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},s.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(e){if(!h)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",l),!l)return;s.priorWebsocketSuccess="websocket"===l.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){h||"closed"!==p.readyState&&(a("changing transport and sending upgrade packet"),u(),p.setTransport(l),l.send([{type:"upgrade"}]),p.emit("upgrade",l),l=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=l.name,p.emit("upgradeError",n)}}))}function n(){h||(h=!0,u(),l.close(),l=null)}function r(e){var s=new Error("probe error: "+e);s.transport=l.name,n(),a('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",s)}function o(){r("transport closed")}function i(){r("socket closed")}function c(t){l&&t.name!==l.name&&(a('"%s" works - aborting "%s"',t.name,l.name),n())}function u(){l.removeListener("open",e),l.removeListener("error",r),l.removeListener("close",o),p.removeListener("close",i),p.removeListener("upgrading",c)}a('probing transport "%s"',t);var l=this.createTransport(t,{probe:1}),h=!1,p=this;s.priorWebsocketSuccess=!1,l.once("open",e),l.once("error",r),l.once("close",o),this.once("close",i),this.once("upgrading",c),l.open()},s.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",s.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},s.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},s.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},s.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},s.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},s.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},s.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},s.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},s.prototype.write=s.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},s.prototype.sendPacket=function(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}},s.prototype.close=function(){function t(){s.onClose("forced close"),a("socket closing - telling transport to close"),s.transport.close()}function e(){s.removeListener("upgrade",e),s.removeListener("upgradeError",e),t()}function n(){s.once("upgrade",e),s.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var s=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},s.prototype.onError=function(t){a("socket error %j",t),s.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},s.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},s.prototype.filterUpgrades=function(t){for(var e=[],n=0,s=t.length;n<s;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function s(e){var n=!1,s=!1,a=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!==location.hostname||u!==e.port,s=e.secure!==c}if(e.xdomain=n,e.xscheme=s,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new i(e)}var r=n(18),o=n(20),i=n(34),a=n(35);e.polling=s,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var s=n(19);t.exports=function(t){var n=t.xdomain,r=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||s))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){(function(e){function s(){}function r(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,s=location.port;s||(s=n?443:80),this.xd=t.hostname!==e.location.hostname||s!==t.port,this.xs=t.secure!==n}}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function i(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=n(18),c=n(21),u=n(8),l=n(32),h=n(3)("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,l(r,c),r.prototype.supportsBinary=!0,r.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new o(t)},r.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,s=this.request({method:"POST",data:t,isBinary:n}),r=this;s.on("success",e),s.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=s},r.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),s=this;try{h("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.extraHeaders[r])}}catch(t){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){s.onLoad()},n.onerror=function(){s.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===t&&(n.responseType="arraybuffer")}4===n.readyState&&(200===n.status||1223===n.status?s.onLoad():setTimeout(function(){s.onError(n.status)},0))},h("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){s.onError(t)},0)}e.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=s:this.xhr.onreadystatechange=s,t)try{this.xhr.abort()}catch(t){}e.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",i):e.addEventListener&&e.addEventListener("beforeunload",i,!1))}).call(e,function(){return this}())},function(t,e,n){function s(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),r.call(this,t)}var r=n(22),o=n(31),i=n(23),a=n(32),c=n(33),u=n(3)("engine.io-client:polling");t.exports=s;var l=function(){return null!=new(n(18))({xdomain:!1}).responseType}();a(s,r),s.prototype.name="polling",s.prototype.doOpen=function(){this.poll()},s.prototype.pause=function(t){function e(){u("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var s=0;this.polling&&(u("we are currently polling - waiting to pause"),s++,this.once("pollComplete",function(){u("pre-pause polling complete"),--s||e()})),this.writable||(u("we are currently writing - waiting to pause"),s++,this.once("drain",function(){u("pre-pause writing complete"),--s||e()}))}else e()},s.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},s.prototype.onData=function(t){var e=this;u("polling got data %s",t);var n=function(t,n,s){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};i.decodePayload(t,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},s.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},s.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};i.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},s.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function s(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var r=n(23),o=n(8);t.exports=s,o(s.prototype),s.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},s.prototype.onPacket=function(t){this.emit("packet",t)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function s(t,n){return n("b"+e.packets[t.type]+t.data.data)}function r(t,n,s){if(!n)return e.encodeBase64Packet(t,s);var r=t.data,o=new Uint8Array(r),i=new Uint8Array(1+r.byteLength);i[0]=v[t.type];for(var a=0;a<o.length;a++)i[a+1]=o[a];return s(i.buffer)}function o(t,n,s){if(!n)return e.encodeBase64Packet(t,s);var r=new FileReader;return r.onload=function(){t.data=r.result,e.encodePacket(t,n,!0,s)},r.readAsArrayBuffer(t.data)}function i(t,n,s){if(!n)return e.encodeBase64Packet(t,s);if(g)return o(t,n,s);var r=new Uint8Array(1);return r[0]=v[t.type],s(new k([r.buffer,t.data]))}function a(t){try{t=d.decode(t,{strict:!1})}catch(t){return!1}return t}function c(t,e,n){for(var s=new Array(t.length),r=f(t.length,n),o=0;o<t.length;o++)!function(t,n,r){e(n,function(e,n){s[t]=n,r(e,s)})}(o,t[o],r)}var u,l=n(24),h=n(9),p=n(25),f=n(26),d=n(27);t&&t.ArrayBuffer&&(u=n(29));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),y="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=m||y;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},_=l(v),b={type:"error",data:"parser error"},k=n(30);e.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return r(e,n,a);if(k&&c instanceof t.Blob)return i(e,n,a);if(c&&c.base64)return s(e,a);var u=v[e.type];return void 0!==e.data&&(u+=o?d.encode(String(e.data),{strict:!1}):String(e.data)),a(""+u)},e.encodeBase64Packet=function(n,s){var r="b"+e.packets[n.type];if(k&&n.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];s(r+t)},o.readAsDataURL(n.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var a=new Uint8Array(n.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];i=String.fromCharCode.apply(null,c)}return r+=t.btoa(i),s(r)},e.decodePacket=function(t,n,s){if(void 0===t)return b;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(s&&!1===(t=a(t)))return b;var r=t.charAt(0);return Number(r)==r&&_[r]?t.length>1?{type:_[r],data:t.substring(1)}:{type:_[r]}:b}var o=new Uint8Array(t),r=o[0],i=p(t,1);return k&&"blob"===n&&(i=new k([i])),{type:_[r],data:i}},e.decodeBase64Packet=function(t,e){var n=_[t.charAt(0)];if(!u)return{type:n,data:{base64:!0,data:t.substr(1)}};var s=u.decode(t.substr(1));return"blob"===e&&k&&(s=new k([s])),{type:n,data:s}},e.encodePayload=function(t,n,s){function r(t){return t.length+":"+t}function o(t,s){e.encodePacket(t,!!i&&n,!1,function(t){s(null,r(t))})}"function"==typeof n&&(s=n,n=null);var i=h(t);return n&&i?k&&!g?e.encodePayloadAsBlob(t,s):e.encodePayloadAsArrayBuffer(t,s):t.length?void c(t,o,function(t,e){return s(e.join(""))}):s("0:")},e.decodePayload=function(t,n,s){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,s);"function"==typeof n&&(s=n,n=null);var r;if(""===t)return s(b,0,1);for(var o,i,a="",c=0,u=t.length;c<u;c++){var l=t.charAt(c);if(":"===l){if(""===a||a!=(o=Number(a)))return s(b,0,1);if(i=t.substr(c+1,o),a!=i.length)return s(b,0,1);if(i.length){if(r=e.decodePacket(i,n,!1),b.type===r.type&&b.data===r.data)return s(b,0,1);if(!1===s(r,c+o,u))return}c+=o,a=""}else a+=l}return""!==a?s(b,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function s(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,s,function(t,e){var s=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),r=new Uint8Array(s),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var s=new Uint8Array(t.length),i=0;i<t.length;i++)s[i]=t.charCodeAt(i);n=s.buffer}r[o++]=e?0:1;for(var a=n.byteLength.toString(),i=0;i<a.length;i++)r[o++]=parseInt(a[i]);r[o++]=255;for(var s=new Uint8Array(n),i=0;i<s.length;i++)r[o++]=s[i]}),n(r.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function s(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var s=new Uint8Array(t.length),r=0;r<t.length;r++)s[r]=t.charCodeAt(r);t=s.buffer,e[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,i=o.toString(),a=new Uint8Array(i.length+1),r=0;r<i.length;r++)a[r]=parseInt(i[r]);if(a[i.length]=255,k){var c=new k([e.buffer,a.buffer,t]);n(null,c)}})}c(t,s,function(t,e){return n(new k(e))})},e.decodePayloadAsBinary=function(t,n,s){"function"==typeof n&&(s=n,n=null);for(var r=t,o=[];r.byteLength>0;){for(var i=new Uint8Array(r),a=0===i[0],c="",u=1;255!==i[u];u++){if(c.length>310)return s(b,0,1);c+=i[u]}r=p(r,2+c.length),c=parseInt(c);var l=p(r,0,c);if(a)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(t){var h=new Uint8Array(l);l="";for(var u=0;u<h.length;u++)l+=String.fromCharCode(h[u])}o.push(l),r=p(r,c)}var f=o.length;o.forEach(function(t,r){s(e.decodePacket(t,n,!0),r,f)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var s in t)n.call(t,s)&&e.push(s);return e}},function(t,e){t.exports=function(t,e,n){var s=t.byteLength;if(e=e||0,n=n||s,t.slice)return t.slice(e,n);if(e<0&&(e+=s),n<0&&(n+=s),n>s&&(n=s),e>=s||e>=n||0===s)return new ArrayBuffer(0);for(var r=new Uint8Array(t),o=new Uint8Array(n-e),i=e,a=0;i<n;i++,a++)o[a]=r[i];return o.buffer}},function(t,e){function n(t,e,n){function r(t,s){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=n):0!==r.count||o||e(null,s)}var o=!1;return n=n||s,r.count=t,0===t?e():r}function s(){}t.exports=n},function(t,e,n){var s;(function(t,r){!function(o){function i(t){for(var e,n,s=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(n=t.charCodeAt(r++),56320==(64512&n)?s.push(((1023&e)<<10)+(1023&n)+65536):(s.push(e),r--)):s.push(e);return s}function a(t){for(var e,n=t.length,s=-1,r="";++s<n;)e=t[s],e>65535&&(e-=65536,r+=_(e>>>10&1023|55296),e=56320|1023&e),r+=_(e);return r}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return _(t>>e&63|128)}function l(t,e){if(0==(4294967168&t))return _(t);var n="";return 0==(4294965248&t)?n=_(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),n=_(t>>12&15|224),n+=u(t,6)):0==(4292870144&t)&&(n=_(t>>18&7|240),n+=u(t,12),n+=u(t,6)),n+=_(63&t|128)}function h(t,e){e=e||{};for(var n,s=!1!==e.strict,r=i(t),o=r.length,a=-1,c="";++a<o;)n=r[a],c+=l(n,s);return c}function p(){if(v>=g)throw Error("Invalid byte index");var t=255&y[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(t){var e,n,s,r,o;if(v>g)throw Error("Invalid byte index");if(v==g)return!1;if(e=255&y[v],v++,0==(128&e))return e;if(192==(224&e)){if(n=p(),(o=(31&e)<<6|n)>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(n=p(),s=p(),(o=(15&e)<<12|n<<6|s)>=2048)return c(o,t)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=p(),s=p(),r=p(),(o=(7&e)<<18|n<<12|s<<6|r)>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function d(t,e){e=e||{};var n=!1!==e.strict;y=i(t),g=y.length,v=0;for(var s,r=[];!1!==(s=f(n));)r.push(s);return a(r)}var m=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);var y,g,v,_=String.fromCharCode,b={version:"2.1.2",encode:h,decode:d};void 0!==(s=function(){return b}.call(e,n,e,t))&&(t.exports=s)}()}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),s=0;s<t.length;s++)n[t.charCodeAt(s)]=s;e.encode=function(e){var n,s=new Uint8Array(e),r=s.length,o="";for(n=0;n<r;n+=3)o+=t[s[n]>>2],o+=t[(3&s[n])<<4|s[n+1]>>4],o+=t[(15&s[n+1])<<2|s[n+2]>>6],o+=t[63&s[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,s,r,o,i,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),h=new Uint8Array(l);for(e=0;e<c;e+=4)s=n[t.charCodeAt(e)],r=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],i=n[t.charCodeAt(e+3)],h[u++]=s<<2|r>>4,h[u++]=(15&r)<<4|o>>2,h[u++]=(3&o)<<6|63&i;return l}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var s=n.buffer;if(n.byteLength!==s.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(s,n.byteOffset,n.byteLength)),s=r.buffer}t[e]=s}}}function s(t,e){e=e||{};var s=new o;n(t);for(var r=0;r<t.length;r++)s.append(t[r]);return e.type?s.getBlob(e.type):s.getBlob()}function r(t,e){return n(t),new Blob(t,e||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),a=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return i?a?e.Blob:r:c?s:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),s=0,r=n.length;s<r;s++){var o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t){var e="";do{e=i[t%a]+e,t=Math.floor(t/a)}while(t>0);return e}function s(t){var e=0;for(l=0;l<t.length;l++)e=e*a+c[t.charAt(l)];return e}function r(){var t=n(+new Date);return t!==o?(u=0,o=t):t+"."+n(u++)}for(var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},u=0,l=0;l<a;l++)c[i[l]]=l;r.encode=n,r.decode=s,t.exports=r},function(t,e,n){(function(e){function s(){}function r(t){o.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=s)},!1)}var o=n(21),i=n(32);t.exports=r;var a,c=/\n/g,u=/\\n/g;i(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},r.prototype.doWrite=function(t,e){function n(){s(),e()}function s(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(t)}catch(t){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,i=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=l,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}this.form.action=this.uri(),s(),t=t.replace(u,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function s(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(p=r),o.call(this,t)}var r,o=n(22),i=n(23),a=n(31),c=n(32),u=n(33),l=n(3)("engine.io-client:websocket"),h=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{r=n(36)}catch(t){}var p=h;p||"undefined"!=typeof window||(p=r),t.exports=s,c(s,o),s.prototype.name="websocket",s.prototype.supportsBinary=!0,s.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new p(t,e):new p(t):new p(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},s.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},s.prototype.write=function(t){function n(){s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0)}var s=this;this.writable=!1;for(var r=t.length,o=0,a=r;o<a;o++)!function(t){i.encodePacket(t,s.supportsBinary,function(o){if(!s.usingBrowserWebSocket){var i={};if(t.options&&(i.compress=t.options.compress),s.perMessageDeflate){("string"==typeof o?e.Buffer.byteLength(o):o.length)<s.perMessageDeflate.threshold&&(i.compress=!1)}}try{s.usingBrowserWebSocket?s.ws.send(o):s.ws.send(o,i)}catch(t){l("websocket closed before onclose event")}--r||n()})}(t[o])},s.prototype.onClose=function(){o.prototype.onClose.call(this)},s.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},s.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},s.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===s.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var s=0;s<t.length;++s)if(t[s]===e)return s;return-1}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,s=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,i=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(i,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(s,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){"use strict";function s(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(7),i=n(8),a=n(40),c=n(41),u=n(42),l=n(3)("socket.io-client:socket"),h=n(31);t.exports=s;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(s.prototype),s.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,"open",u(this,"onopen")),c(t,"packet",u(this,"onpacket")),c(t,"close",u(this,"onclose"))]}},s.prototype.open=s.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},s.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},s.prototype.emit=function(t){if(p.hasOwnProperty(t))return f.apply(this,arguments),this;var e=a(arguments),n={type:o.EVENT,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},s.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},s.prototype.onopen=function(){if(l("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"===r(this.query)?h.encode(this.query):this.query;l("sending connect packet with query %s",t),this.packet({type:o.CONNECT,query:t})}else this.packet({type:o.CONNECT})},s.prototype.onclose=function(t){l("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},s.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},s.prototype.onevent=function(t){var e=t.data||[];l("emitting event %j",e),null!=t.id&&(l("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},s.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var s=a(arguments);l("sending ack %j",s),e.packet({type:o.ACK,id:t,data:s})}}},s.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(l("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):l("bad ack %s",t.id)},s.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},s.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},s.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},s.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},s.prototype.close=s.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},s.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t,e){var n=[];e=e||0;for(var s=e||0;s<t.length;s++)n[s-e]=t[s];return n}t.exports=n},function(t,e){"use strict";function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var s=n.call(arguments,2);return function(){return e.apply(t,s.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])})},,,,,,function(t,e){},function(t,e){},,,,,,,,,,function(t,e){},,,,,,,,,,,,,,,,function(t,e){},function(t,e,n){"use strict";var s=n(2),r=n(168),o=n(157),i=n.n(o),a=n(160),c=n.n(a),u=n(159),l=n.n(u),h=n(156),p=n.n(h),f=n(158),d=n.n(f);s.default.use(r.a),e.a=new r.a({routes:[{path:"/",name:"login",component:d.a},{path:"/login",name:"登录",component:d.a},{path:"/friends",name:"朋友",component:i.a},{path:"/chat",name:"聊天",component:p.a},{path:"/self",name:"我",component:c.a},{path:"/posts",name:"朋友圈",component:l.a}]})},function(t,e,n){"use strict";var s=n(85),r=n.n(s),o=n(2),i=n(10),a=n(7),c=n.n(a);o.default.use(i.c);var u="http://115.159.72.218:3000/";e.a=new i.c.Store({state:{host:u,friends:[],posts:[],self:[],message:[],chat_friend:{name:"",id:"",logo:null},me:null,request_list:{get:[],send:[]},socket:null,showAddPost:!1},getters:{},mutations:{set_showAddPost:function(t,e){t.showAddPost=e},set_me:function(t,e){null!=e?(t.me={},t.me.username=e.username,t.me.nickname=e.nickname,t.me.id=e.id,t.me.logo=e.logo):t.me=null},set_friends:function(t,e){t.friends=e},set_chat_friend:function(t,e){null==e?t.chat_friend={name:"",id:"",logo:null}:(t.chat_friend.name=e.friend.nickname,t.chat_friend.id=e.friend.id,t.chat_friend.logo=e.friend.logo)},addUnread:function(t,e){t.friends=t.friends.map(function(t){return t.id==e.id&&(console.log(t.unread),t.unread++),t})},clearUnread:function(t,e){console.log("clear"),t.friends.map(function(t){t.id===e&&(t.unread=0)})},set_request_list:function(t,e){t.request_list=e},set_socket:function(t,e){t.socket=e},set_unread:function(t,e){t.friends.map(function(t){return t.id==e.id&&(t.unread=e.num),t})},set_posts:function(t,e){t.posts=[]}},actions:{search_friend:function(t,e){var n=(t.state,e.name),s=e.id;return new r.a(function(t,e){c.a.ajax({url:u+"user/"+s+"/search",type:"get",data:{name:n,id:s},success:function(e){var n=[];e=e.map(function(t){t.id!=s&&n.push(t)}),t(n)}})})},fetch_request_list:function(t,e){var n=(t.state,t.commit);return new r.a(function(t,s){c.a.ajax({url:u+"user/"+e+"/request",type:"get",success:function(e){n("set_request_list",e),t(e)}})})},getFriends:function(t,e){var n=t.state;return new r.a(function(t,s){c.a.ajax({url:u+"user/"+e+"/friends",type:"get",success:function(e){for(var s=0;s<e.length;s++)n.friends[s]?e[s].unread=n.friends[s].unread:e[s].unread=0;n.friends=e,t(e)}})})},getPosts:function(t,e){var n=t.state;c.a.ajax({url:u+"user/"+e+"/posts_detail",success:function(t){console.log("posts",t),n.posts=t}})},get_message:function(t,e){var n=t.state;return new r.a(function(t,s){c.a.ajax({url:"http://115.159.72.218:3000/message",data:{user:e.userid,friend:e.friendid},success:function(s){s=JSON.parse("["+s.toString()+"]"),n.message=s,t({data:s,friendID:e.friendid})}})})},clear_message:function(t,e){t.state.message=[]}}})},,function(t,e){},function(t,e,n){function s(t){n(148)}var r=n(9)(n(78),n(162),s,null,null);t.exports=r.exports},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(37),r=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={props:{username:{type:String,required:!0},initials:{type:String},backgroundColor:{type:String},color:{type:String},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80}},data:function(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}},mounted:function(){this.$emit("avatar-initials",this.username,this.userInitial)},computed:{background:function(){return this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor:function(){return this.color||this.lightenColor(this.background,this.lighten)},isImage:function(){return void 0!==this.src},style:function(){var t={width:this.size+"px",height:this.size+"px",borderRadius:this.rounded?"50%":0,textAlign:"center",verticalAlign:"middle"},e={background:"url("+this.src+") no-repeat",backgroundSize:this.size+"px "+this.size+"px",backgroundOrigin:"content-box"},n={backgroundColor:this.background,font:Math.floor(this.size/2.5)+"px/100px Helvetica, Arial, sans-serif",fontWeight:"bold",color:this.fontColor,lineHeight:this.size+Math.floor(this.size/20)+"px"},s=this.isImage?e:n;return(0,r.default)(t,s),t},userInitial:function(){return this.initials||this.initial(this.username)}},methods:{initial:function(t){for(var e=t.split(/[ -]/),n="",s=0;s<e.length;s++)n+=e[s].charAt(0);return n.length>3&&-1!==n.search(/[A-Z]/)&&(n=n.replace(/[a-z]+/g,"")),n=n.substr(0,3).toUpperCase()},randomBackgroundColor:function(t,e){return e[t%e.length]},lightenColor:function(t,e){var n=!1;"#"===t[0]&&(t=t.slice(1),n=!0);var s=parseInt(t,16),r=(s>>16)+e;r>255?r=255:r<0&&(r=0);var o=(s>>8&255)+e;o>255?o=255:o<0&&(o=0);var i=(255&s)+e;return i>255?i=255:i<0&&(i=0),(n?"#":"")+(i|o<<8|r<<16).toString(16)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(145),r=(n.n(s),n(130)),o=n.n(r),i=n(146),a=(n.n(i),n(6)),c=(n.n(a),n(131)),u=n.n(c),l=n(12),h=n.n(l),p=n(7),f=(n.n(p),n(11)),d=n(10);e.default={name:"app",data:function(){return{init:{chat_init:!1,friends_init:!1,login_init:!1,posts_init:!1,self_init:!1,setInit:this.setInit}}},computed:h()({},n.i(d.a)(["me","socket"])),mounted:function(){var t=this,e=JSON.parse(n.i(f.a)("user"));e&&this.set_me(e),0!=e.status?this.$router.push("/login"):this.socket&&this.socket.on("logout",function(){alert("别处登陆"),n.i(f.b)("user"),t.$router.push("/login"),t.set_me(null),t.socket.close(),t.set_socket(null),t.init.setInit()})},watch:{$route:function(){this.me}},methods:h()({},n.i(d.b)(["set_me","set_socket","set_showAddPost"]),{setInit:function(t){t?this.init[t]=!0:(this.init.chat_init=!1,this.init.friends_init=!1,this.init.login_init=!1,this.init.posts_init=!1,this.init.self_init=!1)},openPost:function(){this.set_showAddPost(!0)},logout:function(){n.i(f.b)("user"),this.$router.push("/login"),this.set_me(null)},handleSelect:function(t){this.$router.push("/"+t)}}),components:{"el-menu":u.a,"el-menu-item":o.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),r=(n.n(s),n(20)),o=n.n(r),i=n(24),a=(n.n(i),n(21)),c=n.n(a),u=n(34),l=(n.n(u),n(6)),h=(n.n(l),n(32)),p=n.n(h),f=n(12),d=n.n(f),m=n(7),y=(n.n(m),n(11)),g=n(17),v=n.n(g),_=n(155),b=n.n(_),k=n(10);e.default={data:function(){return{text:"",chatRoom:null}},methods:d()({},n.i(k.b)(["set_me","set_socket","set_chat_friend","clearUnread"]),n.i(k.d)(["get_message","send_message","getFriends","clear_unread"]),{sendMessage:function(){if(""==this.text)return void p.a.error("不能发送空消息");this.socket.emit("message",{friend:{name:this.chat_friend.name,id:this.chat_friend.id,logo:this.chat_friend.logo},text:this.text,user:{name:this.me.nickname,id:this.me.id,logo:this.me.logo},sendTime:(new Date).valueOf(),readed:!1,type:"send"}),this.text=""},updateHandle:function(){var t=this;console.log(this.$refs),this.get_message({userid:this.me.id,friendid:this.chat_friend.id}).then(function(){t.$nextTick(function(){t.$refs.chatRoom.scrollTop=t.$refs.chatRoom.scrollHeight})}),"/chat"==this.$route.path&&this.socket.emit("clearunread",{userid:this.me.id,friendid:this.chat_friend.id})}}),computed:d()({},n.i(k.a)(["chat_friend","me","message","socket","host"])),props:["init"],mounted:function(){var t=this;console.log("chat");var e=JSON.parse(n.i(y.a)("user"));this.set_me(e),this.getFriends(this.me.id);var s=this.$route.query.nickname,r=this.$route.query.id,o=this.$route.query.logo;e&&s&&r?(this.socket||(this.set_socket(v.a.connect(this.host)),this.socket.emit("login",this.me)),this.init.chat_init||this.init.setInit("chat_init"),this.socket.off("update"),this.socket.on("update",this.updateHandle),o||(o=""),this.set_chat_friend({friend:{nickname:s,id:r,logo:o}}),this.get_message({userid:this.me.id,friendid:this.chat_friend.id}).then(function(){t.$nextTick(function(){t.$refs.chatRoom.scrollTop=t.$refs.chatRoom.scrollHeight})})):this.$router.push("/login"),this.socket.emit("clearunread",{userid:this.me.id,friendid:this.chat_friend.id}),this.socket.on("clearAll",function(){})},components:{Avatar:b.a,"el-input":c.a,"el-button":o.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(50),r=(n.n(s),n(6)),o=(n.n(r),n(47)),i=n.n(o),a=n(12),c=n.n(a),u=n(11),l=n(10),h=n(17),p=n.n(h);e.default={data:function(){return{}},props:["init"],methods:c()({},n.i(l.d)(["getFriends","get_message","clear_message"]),n.i(l.b)(["set_chat_friend","set_me","addUnread","clearUnread","set_socket","set_unread"]),{chat:function(t,e,n){this.$router.push("/chat?nickname="+t+"&id="+e+"&logo="+n),this.set_chat_friend({friend:{nickname:t,id:e,logo:n}}),this.clear_message()}}),computed:c()({},n.i(l.a)(["friends","me","socket","host"])),mounted:function(){var t=this;console.log(n.i(u.a)("user"));var e=JSON.parse(n.i(u.a)("user"));e?(this.set_me(e),this.me&&(this.getFriends(this.me.id).then(function(e){for(var n=0;n<e.length;n++)t.get_message({userid:t.me.id,friendid:e[n].id}).then(function(e){for(var n=0,s=0;s<e.data.length;s++)0==e.data[s].readed&&n++;t.set_unread({id:e.friendID,num:n}),t.clear_message()})}),this.socket||(this.set_socket(p.a.connect(this.host)),this.socket.emit("login",this.me)),this.socket.off("update"),this.init.friends_init||(this.init.setInit("friends_init"),this.socket.on("addUnread",function(e){t.addUnread(e)}),this.socket.on("get_request",function(t){alert("你收到一个好友请求")})))):(this.$router.push("/login"),this.set_me(null))},components:{"el-badge":i.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),r=(n.n(s),n(20)),o=n.n(r),i=n(24),a=(n.n(i),n(21)),c=n.n(a),u=n(143),l=(n.n(u),n(125)),h=n.n(l),p=n(144),f=(n.n(p),n(126)),d=n.n(f),m=n(36),y=n.n(m),g=n(34),v=(n.n(g),n(6)),_=(n.n(v),n(32)),b=n.n(_),k=n(12),w=n.n(k),x=n(17),C=n.n(x),A=n(11),S=n(7),B=n.n(S),T=n(10);e.default={data:function(){return{ruleForm2:{pass:"",username:""},showRegister:!1,r_username:"",r_password:"",r_c_password:"",r_nickname:""}},props:["init"],mounted:function(){this.init.setInit("login_init"),JSON.parse(n.i(A.a)("user"))?this.$router.push("/friends"):this.set_me(null),document.addEventListener("keydown",this.keydownHandler,!1)},computed:w()({},n.i(T.a)(["friends","me","socket","host"])),methods:w()({},n.i(T.b)(["set_me","set_socket"]),{keydownHandler:function(t){t&&13==t.keyCode&&this.submit()},registerHandler:function(){var t=this;return this.r_username.match(/^[0-9a-zA-Z_]{6,12}$/)?this.r_password!=this.r_c_password?void alert("密码不一致"):void B.a.ajax({url:this.host+"checkusername",type:"post",data:{username:this.r_username},success:function(e){0==e.status&&B.a.ajax({url:t.host+"register",type:"post",data:{username:t.r_username,password:t.r_password,nickname:t.r_nickname},success:function(e){t.showRegister=!1,b()({message:"注册成功！请重新登录",type:"success"})}})}}):void alert("用户名不符合规范")},submit:function(){var t=this,e=this.ruleForm2.username,s=this.ruleForm2.pass;B.a.ajax({url:this.host+"login",data:{username:e,password:s},type:"post",success:function(e){0==e.status?(t.set_me(e),n.i(A.c)("user",y()(e),1),t.socket||(t.set_socket(C.a.connect(t.host)),t.socket.emit("login",t.me),t.socket.on("logout",function(){alert("别处登陆"),n.i(A.b)("user"),t.$router.push("/login"),t.set_me(null),t.socket.close(),t.set_socket(null),t.init.setInit()})),document.removeEventListener("keydown",t.keydownHandler,!1),t.$router.push("/friends")):1==e.status?b.a.error("用户名活密码错误"):b.a.error("未知错误")}})}}),components:{"el-form":d.a,"el-form-item":h.a,"el-input":c.a,"el-button":o.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),r=(n.n(s),n(20)),o=n.n(r),i=n(24),a=(n.n(i),n(6)),c=(n.n(a),n(21)),u=n.n(c),l=n(12),h=n.n(l),p=n(2),f=n(7),d=n.n(f),m=n(11),y=n(17),g=n.n(y),v=n(10);e.default={computed:h()({},n.i(v.a)(["posts","me","host","socket","showAddPost"]),{postList:function(){return this.posts.map(function(t){return p.default.set(t,"open",!1),p.default.set(t,"allowStar",!0),t})}}),props:["init"],data:function(){return{showCommentMessage:!1,activePostID:null,activeCommentID:null,commentText:"",showReplyMessage:!1,replyText:"",postTitle:"",postContent:""}},methods:h()({},n.i(v.d)(["getPosts","getFriends"]),n.i(v.b)(["set_chat_friend","set_me","addUnread","clearUnread","set_socket","set_showAddPost"]),{open:function(t,e){var n=this;d.a.ajax({url:this.host+"checkStar",type:"post",data:{userid:this.me.id,postid:e},success:function(e){1==e.allowStar?n.posts[t].allowStar=!0:n.posts[t].allowStar=!1;for(var s=0;s<n.posts.length;s++)s==t?n.posts[t].open=!n.posts[t].open:n.posts[s].open=!1}})},openComment:function(t,e){this.postList[t].open=!1,this.showCommentMessage=!0,this.activePostID=e},sendComment:function(t){var e=this,n=this.commentText;""!=n&&d.a.ajax({url:this.host+"sendComment",type:"post",data:{userid:this.me.id,postid:t,text:n},success:function(t){1==t.affectedRows&&(e.activePostID=null,e.commentText="",e.showCommentMessage=!1,e.getPosts(e.me.id))}})},sendStart:function(t,e){var n=this;d.a.ajax({url:this.host+"sendStar",type:"post",data:{userid:e,postid:t},success:function(t){0==t.status&&n.getPosts(n.me.id)}})},deleteStar:function(t,e){var n=this;d.a.ajax({url:this.host+"deleteStar",type:"post",data:{postid:t,userid:e},success:function(t){0==t.status&&n.getPosts(n.me.id)}})},reply:function(t,e){var n=e.comments_id;t.authID==this.me.id&&null==e.r_content&&(this.showReplyMessage=!0,this.activeCommentID=n)},sendReply:function(){var t=this;""!=this.replyText&&d.a.ajax({url:this.host+"sendReply",type:"post",data:{commentid:this.activeCommentID,text:this.replyText},success:function(e){0==e.status&&(t.activePostID=null,t.replyText="",t.showReplyMessage=!1,t.getPosts(t.me.id))}})},closePost:function(){this.set_showAddPost(!1)},submitPost:function(){var t=this;d.a.ajax({url:this.host+"addPost",data:{userid:this.me.id,title:this.postTitle,content:this.postContent},type:"post",success:function(e){console.log(e),t.getPosts(t.me.id),t.set_showAddPost(!1)}})}}),mounted:function(){this.init.setInit("posts_init");var t=JSON.parse(n.i(m.a)("user"));t?(this.set_me(t),this.me&&(this.getPosts(this.me.id),this.socket,this.socket||(this.set_socket(g.a.connect(this.host)),this.socket.emit("login",this.me)))):(this.$router.push("/login"),this.set_me(null))},components:{"el-input":u.a,"el-button":o.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(50),r=(n.n(s),n(47)),o=n.n(r),i=n(140),a=(n.n(i),n(122)),c=n.n(a),u=n(141),l=(n.n(u),n(123)),h=n.n(l),p=n(24),f=(n.n(p),n(21)),d=n.n(f),m=n(142),y=(n.n(m),n(124)),g=n.n(y),v=n(23),_=(n.n(v),n(20)),b=n.n(_),k=n(147),w=(n.n(k),n(136)),x=n.n(w),C=n(36),A=n.n(C),S=n(34),B=(n.n(S),n(6)),T=(n.n(B),n(32)),P=n.n(T),E=n(12),R=n.n(E),q=n(7),N=n.n(q),j=n(154),D=n.n(j),O=n(11),I=n(17),M=n.n(I),U=n(10);e.default={data:function(){return{search_name:"",search_friend_result:[],action:"",search_friend_visible:!1,swiper:null,num_send_request:0,showSlideBox:!1,loading:!1}},props:["init"],mounted:function(){var t=this;console.log(n.i(O.a)("user"));var e=JSON.parse(n.i(O.a)("user"));if(e){this.set_me(e);var s=this.me.id;this.action=this.host+"user/"+s+"/upload",this.getFriends(this.me.id),this.socket||(this.set_socket(M.a.connect(this.host)),this.socket.emit("login",this.me)),this.init.self_init||(this.init.setInit("self_init"),this.socket.on("get_request",function(e){t.fetch_request_list(t.me.id),alert("你收到一个好友请求")}),this.socket.on("request_result",function(e){t.fetch_request_list(t.me.id)}),this.socket.on("wearefriend",function(){alert("收到啦"),t.num_send_request++})),this.fetch_request_list(this.me.id).then(function(t){})}else this.$router.push("/login"),this.set_me(null)},methods:R()({},n.i(U.d)(["getFriends","search_friend","fetch_request_list"]),n.i(U.b)(["set_chat_friend","set_me","addUnread","clearUnread","set_socket","set_friends","set_posts"]),{search:function(){var t=this,e=this.me.id;this.search_friend({name:this.search_name,id:e}).then(function(e){t.search_friend_result=e,t.$nextTick(function(){t.swiper?(t.swiper.update(),t.swiper.onResize()):t.swiper=new D.a(".swiper-container",{scrollbar:".swiper-scrollbar",direction:"vertical",slidesPerView:"auto",mousewheelControl:!0,freeMode:!0,roundLengths:!0,scrollbarHide:!1})})})},sendRequest:function(t,e){for(var n=!1,s=0;s<this.friends.length;s++)if(this.friends[s].id==e.id){n=!0;break}n?P.a.error("你们已经是好友了，请不要重复添加。"):(this.socket.emit("friend_request",{from:t,to:e}),this.fetch_request_list(this.me.id),P()({message:"成功发出请求",type:"success"}))},request_handle:function(t,e,n){var s=this;N.a.ajax({url:this.host+"user/"+t+"/af",type:"post",data:{id:this.me.id,userid:t,request_id:e,type:n},success:function(e){s.fetch_request_list(s.me.id),s.socket.emit("wearefriend",t)}})},handleAvatarSuccess:function(t,e){console.log(t,e),this.me.logo=t.logo;var s={id:this.me.id,nickname:this.me.nickname,username:this.me.username,logo:this.me.logo,status:0};this.set_me(s),n.i(O.c)("user",A()(s),1),this.loading=!1},beforeAvatarUpload:function(t){console.log(t.type);var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;return e||P.a.error("上传头像图片只能是 JPG | PNG 格式!"),n||P.a.error("上传头像图片大小不能超过 2MB!"),e&&n},uploadProgress:function(){this.loading=!0},show_search:function(){this.search_friend_visible=!0},handleClose:function(t){this.search_friend_visible=!1},collapse_handleChange:function(t){t.indexOf("send")>=0&&(this.num_send_request=0)},logout:function(){n.i(O.b)("user"),this.$router.push("/login"),this.socket.emit("logout",this.me.id),this.socket.close(),this.set_socket(null),this.set_me(null),this.set_friends([]),this.set_chat_friend(null),this.set_posts([]),this.init.setInit()}}),computed:R()({},n.i(U.a)(["friends","me","request_list","socket","host"]),{num_get_request:function(){var t=0;return this.request_list.get.map(function(e){null==e.respone&&t++}),t}}),components:{"el-upload":x.a,"el-button":b.a,"el-dialog":g.a,"el-input":d.a,"el-collapse":h.a,"el-collapse-item":c.a,"el-badge":o.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(54),r=(n.n(s),n(6)),o=(n.n(r),n(53)),i=n.n(o),a=n(2),c=n(55),u=n.n(c),l=n(51),h=n(52),p=n(7),f=n.n(p);a.default.use(i.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:l.a,store:h.a,template:"<App/>",components:{App:u.a}}),f()(".preload").remove(),clearInterval(window.timer1),window.cancelAnimationFrame(window.timer2)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){var s=n(9)(n(77),n(161),null,null,null);t.exports=s.exports},function(t,e,n){function s(t){n(151)}var r=n(9)(n(79),n(165),s,null,null);t.exports=r.exports},function(t,e,n){function s(t){n(152)}var r=n(9)(n(80),n(166),s,null,null);t.exports=r.exports},function(t,e,n){function s(t){n(153)}var r=n(9)(n(81),n(167),s,null,null);t.exports=r.exports},function(t,e,n){function s(t){n(150)}var r=n(9)(n(82),n(164),s,null,null);t.exports=r.exports},function(t,e,n){function s(t){n(149)}var r=n(9)(n(83),n(163),s,null,null);t.exports=r.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"avatar",style:t.style},[this.src?t._e():n("span",[t._v(t._s(t.userInitial))])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"title"},[t._v("\n    "+t._s(t.$route.name)+"\n    "),t._v(" "),"/posts"==t.$route.path?n("div",{staticClass:"add-post",on:{click:t.openPost}},[t._v("\n      +\n    ")]):t._e()]),t._v(" "),n("div",{staticClass:"content"},[n("router-view",{ref:"rv",attrs:{init:t.init}})],1),t._v(" "),t.me?n("div",{staticClass:"menu"},[n("el-menu",{staticClass:"el-menu-demo",attrs:{theme:"dark","default-active":"1",mode:"horizontal"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"friends"}},[t._v("朋友")]),t._v(" "),n("el-menu-item",{attrs:{index:"posts"}},[t._v("朋友圈")]),t._v(" "),n("el-menu-item",{attrs:{index:"self"}},[t._v("我")])],1)],1):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.me?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"self"},[n("div",{staticClass:"header"},[n("el-upload",{staticClass:"avatar-uploader",class:"uploader",attrs:{name:"img",action:t.action,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"on-progress":t.uploadProgress}},[t.me.logo?n("img",{staticClass:"avatar",attrs:{src:t.host+"upload/"+t.me.logo}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),n("div",{staticClass:"user-info"},[n("h1",{staticClass:"nickname"},[t._v("昵称："+t._s(t.me.nickname))]),t._v(" "),n("br"),t._v(" "),n("h2",{staticClass:"username"},[t._v("用户名："+t._s(t.me.username))])])],1),t._v(" "),n("div",{staticClass:"logout-wrapper"},[n("el-button",{staticClass:"logout_btn",attrs:{type:"danger",size:"large"},on:{click:t.logout}},[t._v("登 出")])],1),t._v(" "),n("div",{staticClass:"add_friend_btn_wrapper"},[n("el-button",{staticClass:"add_friend_btn",attrs:{type:"primary",size:"large"},on:{click:function(e){t.showSlideBox=!0}}},[t._v("添加好友")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSlideBox,expression:"showSlideBox"}],staticClass:"slide-box"},[n("form",{attrs:{action:""}},[n("el-input",{attrs:{placeholder:"请输入昵称，不输入则查找全部",icon:"search","on-icon-click":t.search},model:{value:t.search_name,callback:function(e){t.search_name=e},expression:"search_name"}})],1),t._v(" "),n("div",{staticClass:"swiper-container"},[n("div",{staticClass:"swiper-wrapper"},[n("div",{staticClass:"swiper-slide"},[n("ul",t._l(t.search_friend_result,function(e){return n("li",{key:e.id,staticClass:"friend-item"},[e.logo?n("img",{attrs:{src:t.host+"upload/"+e.logo,alt:"",width:"70",height:"70"}}):t._e(),t._v(" "),e.logo?t._e():n("img",{attrs:{src:t.host+"upload/null.jpg",alt:"",width:"70",height:"70"}}),t._v(" "),n("div",{staticClass:"right"},[n("h2",[t._v(t._s(e.nickname))]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){t.sendRequest(t.me,e)}}},[t._v("申请好友")])],1)])})),t._v(" "),n("span",{staticClass:"dialog-footer",slot:"footer"})])]),t._v(" "),n("div",{staticClass:"swiper-scrollbar"})]),t._v(" "),n("div",{staticClass:"back-btn-wrapper"},[n("el-button",{staticClass:"back-btn",attrs:{type:"primary",size:"large"},on:{click:function(e){t.showSlideBox=!1}}},[t._v("返回")])],1)])]),t._v(" "),n("div",{staticClass:"request"},[n("el-collapse",{on:{change:t.collapse_handleChange}},[n("el-collapse-item",{attrs:{name:"get"}},[n("template",{slot:"title"},[n("el-badge",{staticClass:"item",attrs:{value:t.num_get_request}},[t._v("\n            你收到的请求\n          ")])],1),t._v(" "),n("ul",{staticClass:"get"},[n("h5",[t._v("收到好友申请：")]),t._v(" "),t._l(t.request_list.get,function(e){return n("li",{key:e.id,staticClass:"request-item"},[t._v("\n            "+t._s(e.nickname)+" 请求添加你为好友\n            "),null==e.respone?n("div",{staticClass:"buttons"},[n("button",{on:{click:function(n){t.request_handle(e.u_id,e.r_id,"agree")}}},[t._v("同意")]),t._v(" "),n("button",{on:{click:function(n){t.request_handle(e.u_id,e.r_id,"refuse")}}},[t._v("拒绝")])]):1==e.respone?n("p",[t._v("\n              已经同意了\n            ")]):n("p",[t._v("\n              已经拒绝了\n            ")])])})],2)],2),t._v(" "),n("el-collapse-item",{attrs:{name:"send"}},[n("template",{slot:"title"},[n("el-badge",{staticClass:"item",attrs:{value:t.num_send_request}},[t._v("\n            你发出的请求\n          ")])],1),t._v(" "),n("ul",{staticClass:"send"},[n("h5",[t._v("已发送的好友请求：")]),t._v(" "),t._l(t.request_list.send,function(e){return n("li",{key:e.id},[null==e.respone?n("p",[t._v("r_id:"+t._s(e.r_id)+" 你请求"+t._s(e.nickname)+" id:"+t._s(e.u_id)+"为好友 等待对方验证")]):1==e.respone?n("p",[t._v("r_id:"+t._s(e.r_id)+" 你请求"+t._s(e.nickname)+" id:"+t._s(e.u_id)+"为好友 对方接受了你的请求")]):n("p",[t._v("r_id:"+t._s(e.r_id)+" 你请求"+t._s(e.nickname)+" id:"+t._s(e.u_id)+"为好友 对方拒绝了你的请求")])])})],2)],2)],1)],1)],1):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"posts"},[n("div",{staticClass:"list"},[n("ul",t._l(t.postList,function(e,s){return n("li",{key:e.postid,staticClass:"post"},[n("div",{staticClass:"post-item"},[n("div",{staticClass:"img"},[e.logo?n("img",{attrs:{src:t.host+"upload/"+e.logo,alt:""}}):t._e(),t._v(" "),e.logo?t._e():n("img",{attrs:{src:t.host+"upload/null.jpg",alt:""}})]),t._v(" "),n("div",{staticClass:"post-content"},[n("h3",{staticClass:"nickname"},[t._v(t._s(e.friendname))]),t._v(" "),n("h4",[t._v(t._s(e.posttitle))]),t._v(" "),n("p",[t._v(t._s(e.postcontent))]),t._v(" "),e.stars.length>0?n("div",{staticClass:"star"},[t._l(e.stars,function(s,r){return n("i",{key:r},[t._v(t._s(s.stars_nickname)+"  "),r!=e.stars.length-1?n("span",[t._v(",")]):t._e()])}),t._v("共"+t._s(e.stars.length)+"个人觉得很赞\r\n          ")],2):t._e(),t._v(" "),n("div",{staticClass:"comment-item"},[e.authID!=t.me.id?n("div",{staticClass:"btn",on:{click:function(n){t.open(s,e.postid)}}},[n("span"),n("span")]):t._e(),t._v(" "),n("transition",{attrs:{name:"open"}},[e.open?n("div",{staticClass:"btn-menu"},[n("ul",{staticClass:"menu"},[e.allowStar?n("li",{on:{click:function(n){t.sendStart(e.postid,t.me.id)}}},[t._v("赞")]):t._e(),t._v(" "),e.allowStar?t._e():n("li",{on:{click:function(n){t.deleteStar(e.postid,t.me.id)}}},[t._v("取消点赞")]),t._v(" "),n("li",{on:{click:function(n){t.openComment(s,e.postid)}}},[t._v("评论")])])]):t._e()]),t._v(" "),n("ul",{on:{click:function(e){t.showCommentMessage=!1}}},t._l(e.comment,function(s){return n("li",{key:s.comments_id},[null!=s.content?n("div",{attrs:{"data-commentid":s.comments_id},on:{click:function(n){t.reply(e,s)}}},[n("span",{staticClass:"nickname"},[t._v(t._s(s.comment_user_nickname))]),t._v(":"+t._s(s.content)+"\r\n                ")]):t._e(),t._v(" "),s.r_content?n("p",[n("span",{staticClass:"nickname"},[t._v(t._s(e.friendname))]),t._v("回复"),n("span",{staticClass:"nickname"},[t._v(t._s(s.comment_user_nickname))]),t._v(":"+t._s(s.r_content))]):t._e()])}))],1)])])])}))]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showCommentMessage?n("div",{staticClass:"comment-message-wrapper"},[n("div",{staticClass:"out",on:{click:function(e){t.showCommentMessage=!1}}}),t._v(" "),n("div",{staticClass:"comment-message-box"},[n("el-input",{staticClass:"comment-input",model:{value:t.commentText,callback:function(e){t.commentText=e},expression:"commentText"}}),t._v(" "),n("el-button",{staticClass:"comment-submit",on:{click:function(e){t.sendComment(t.activePostID)}}},[t._v("提交")])],1)]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showReplyMessage?n("div",{staticClass:"comment-message-wrapper"},[n("div",{staticClass:"out",on:{click:function(e){t.showReplyMessage=!1}}}),t._v(" "),n("div",{staticClass:"comment-message-box"},[n("el-input",{staticClass:"comment-input",model:{value:t.replyText,callback:function(e){t.replyText=e},expression:"replyText"}}),t._v(" "),n("el-button",{staticClass:"comment-submit",on:{click:function(e){t.sendReply(t.activeCommentID)}}},[t._v("回复")])],1)]):t._e()]),t._v(" "),t.showAddPost?n("div",{staticClass:"add-post-page"},[n("div",{staticClass:"post-box"},[n("p",[t._v("标题：")]),t._v(" "),n("el-input",{staticClass:"title-input",model:{value:t.postTitle,callback:function(e){t.postTitle=e},expression:"postTitle"}}),t._v(" "),n("p",[t._v("内容：")]),t._v(" "),n("el-input",{staticClass:"content-input",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.postContent,callback:function(e){t.postContent=e},expression:"postContent"}}),t._v(" "),n("el-button",{staticClass:"comment-submit",attrs:{type:"warning"},on:{click:t.closePost}},[t._v("取消")]),t._v(" "),n("el-button",{staticClass:"comment-submit",attrs:{type:"info"},on:{click:t.submitPost}},[t._v("发布")])],1)]):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"chat",staticClass:"chat"},[n("div",{ref:"chatRoom",staticClass:"chat-room"},[t.chat_friend.name?n("ul",{staticClass:"message-list"},t._l(t.message,function(e,s){return n("li",{key:s,class:{send:"send"==e.type,receive:"receive"==e.type}},["receive"==e.type&&"null"!=t.chat_friend.logo?n("avatar",{staticClass:"avatar",attrs:{src:t.host+"upload/"+t.chat_friend.logo,username:t.chat_friend.name,size:70}}):t._e(),t._v(" "),"receive"==e.type&&"null"==t.chat_friend.logo?n("avatar",{staticClass:"avatar",attrs:{src:t.host+"upload/null.jpg",username:t.chat_friend.name,size:70}}):t._e(),t._v(" "),"send"==e.type&&t.me.logo?n("avatar",{staticClass:"avatar",attrs:{src:t.host+"upload/"+t.me.logo,username:t.me.nickname,size:70}}):t._e(),t._v(" "),"send"!=e.type||t.me.logo?t._e():n("avatar",{staticClass:"avatar",attrs:{src:t.host+"upload/null.jpg",username:t.me.nickname,size:70}}),t._v(" "),n("div",{staticClass:"text"},[t._v("\n          "+t._s(e.text)+"\n        ")])],1)})):t._e()]),t._v(" "),n("div",{staticClass:"input-box"},[n("el-input",{attrs:{type:"text"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),n("el-button",{on:{click:t.sendMessage}},[t._v("发送")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"friends"},[n("ul",t._l(t.friends,function(e){return n("li",{key:e.id,on:{click:function(n){t.chat(e.nickname,e.id,e.logo)}}},[n("el-badge",{staticClass:"item",attrs:{value:e.unread}},[e.logo?n("img",{attrs:{src:t.host+"upload/"+e.logo,alt:"",width:"90",height:"90"}}):t._e(),t._v(" "),e.logo?t._e():n("img",{attrs:{src:t.host+"upload/null.jpg",alt:"",width:"90",height:"90"}})]),t._v(" "),n("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))])],1)}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"label-width":"100px","label-position":"left"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:t.ruleForm2.username,callback:function(e){t.ruleForm2.username=t._n(e)},expression:"ruleForm2.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"pass"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.ruleForm2.pass,callback:function(e){t.ruleForm2.pass=e},expression:"ruleForm2.pass"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("登录")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showRegister=!0}}},[t._v("注册")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showRegister?n("div",{staticClass:"register"},[n("el-form",[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:t.r_username,callback:function(e){t.r_username=e},expression:"r_username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"pass"}},[n("el-input",{attrs:{type:"password"},model:{value:t.r_password,callback:function(e){t.r_password=e},expression:"r_password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"请再次输入密码",prop:"pass"}},[n("el-input",{attrs:{type:"password"},model:{value:t.r_c_password,callback:function(e){t.r_c_password=e},expression:"r_c_password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[n("el-input",{model:{value:t.r_nickname,callback:function(e){t.r_nickname=e},expression:"r_nickname"}})],1),t._v(" "),n("div",{staticStyle:{"margin-bottom":"30px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.registerHandler}},[t._v("注册")])],1),t._v(" "),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showRegister=!1}}},[t._v("返回")])],1)],1)],1):t._e()])],1)},staticRenderFns:[]}}],[84]);
//# sourceMappingURL=app.35e63f5594ba24c98819.js.map